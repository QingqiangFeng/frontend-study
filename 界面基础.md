# 界面基础

## 浏览器基础结构

浏览器基础结构主要包括如下7部分
[参考](https://blog.csdn.net/buzhibujuell/article/details/68952370)：

1. 用户界面（User Interface）:用户所看到及与之交互的功能组件，如地址栏，返回，前进按钮等；
2. 浏览器引擎（Browser engine）:负责控制和管理下一级的渲染引擎；
3. 渲染引擎（Rendering engine）:负责解析用户请求的内容（如HTML或XML，渲染引擎会解析HTML或XML，以及相关CSS，然后返回解析后的内容）；
4. 网络（Networking）:负责处理网络相关的事务，如HTTP请求等；
5. UI后端（UI backend）:负责绘制提示框等浏览器组件，其底层使用的是操作系统的用户接口；
6. JavaScript解释器（JavaScript interpreter）:负责解析和执行JavaScript代码；
7. 数据存储（Data storage）:负责持久存储诸如cookie和缓存等应用数据。

## CSS渲染

[参考](https://blog.csdn.net/ssisse/article/details/51200737)

1. 浏览器下载的顺序是从上到下，渲染的顺序也是从上到下，下载和渲染是同时进行的。
2. 在渲染到页面的某一部分时，其上面的所有部分都已经下载完成（并不是说所有相关联的元素都已经下载完）。
3. 如果遇到语义解释性的标签嵌入文件（JS脚本，CSS样式），那么此时IE的下载过程会启用单独连接进行下载。
4. 并且在下载后进行解析，解析过程中，停止页面所有往下元素的下载。
5. 样式表在下载完成后，将和以前下载的所有样式表一起进行解析，解析完成后，将对此前所有元素（含以前已经渲染的）重新进行渲染。
6. JS、CSS中如有重定义，后定义函数将覆盖前定义函数。

浏览器CSS匹配不是从左到右进行查找，而是从右到左进行查找。比如之前说的DIV#divBox p span.red{color:red;}，浏览器 的查找顺序如下：先查找html中所有class=’red’的span元素，找到后，再查找其父辈元素中是否有p元素，再判断p的父元素中是否有id为 divBox的div元素，如果都存在则CSS匹配上。

浏览器从右到左进行查找的好处是为了尽早过滤掉一些无关的样式规则和元素。firefox称这种查 找方式为keyselector(关键字查询)，所谓的关键字就是样式规则中最后(最右边)的规则，上面的key就是span.red。

## JS 解析

[参考](https://blog.csdn.net/qiuchangjun/article/details/79849761)

[async defer](https://www.cnblogs.com/jiasm/p/7683930.html)

integrity属性，hash防止修改

同源线程限制，多源加速

JS触发重绘和重流优化：

1. 读取DOM或者写入DOM，尽量写在一起，不要混杂
2. 缓存DOM信息
3. 不要一项一项地改变样式，而是使用CSS class一次性改变样式
4. 使用document fragment操作DOM
5. 动画时使用absolute定位或fixed定位，这样可以减少对其他元素的影响
6. 只在必要时才显示元素
7. 使用window.requestAnimationFrame()，因为它可以把代码推迟到下一次重流时执行，而不是立即要求页面重流
8. 使用虚拟DOM（virtual DOM）库

动态嵌入脚本，及保护执行顺序

消息队列（事件、定时器）
